@{
    ViewBag.Title = "Generate Waterfall";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var context = (SawyerSight.Web.Models.ViewModel.WaterfallContext)Session["WaterfallContext"];
    if (context == null)
    {
        context = new SawyerSight.Web.Models.ViewModel.WaterfallContext();
    }
}

<br />
<div class="row" id="boxesDiv">
    @Html.Partial("/Views/Shared/_ClientProjectCards.cshtml")
</div>
<br />

<div class="row"><h3>Generate the Waterfall</h3></div>
<br />
@using (Html.BeginForm("GenerateWaterfall", "Waterfall", FormMethod.Post, new { @style = "width:100%;" }))
{
<div class="row">
    <div class="col-md-8">
        <div class="row">
            <div class="card">
                <div class="card-header card-gray-background">
                    The following options are available:
                </div>
                <div class="card-body card-white-background">
                    <ol>
                        <li>Use the Navigation on the Top of the window to move to a subsection of this process (i.e. ‘Select Client Data’, Enter Waterfall Parameters’, etc.)</li>
                        <li>Select ‘Generate Waterfall’</li>
                        <li>Cancel this process and exit the application saving the work entered.</li>
                    </ol>
                </div>
            </div>
        </div>

        <br />
        <div class="row">
            <div class="card" style="width:100%;">
                <div class="card-header card-gray-background">
                    Generate Waterfall will:
                </div>
                <div class="card-body card-white-background">
                    <ol>
                        <li>Save your Categories and Trial Balance selections</li>
                        <li>If this waterfall represents an existing client, all prior waterfall information will be deleted</li>
                        <li>Create a waterfall based on the dataset selected at the beginning of this process</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card">
            <div class="card-header card-darkgrey-background">
                CATEGORIES CREATED:
            </div>
            <div class="card-body card-gray-background">
                <h5>REVENUE</h5>
                <input type="hidden" id="selectedRevenue" name="selectedRevenue" />
                <ul id="revenueList">
                    @if (context.RevenueAccounts != null)
                    {
                        if (!string.IsNullOrWhiteSpace(context.RevenueAccounts.Revenue1Name))
                        {
                            <li>@context.RevenueAccounts.Revenue1Name</li>
                        }
                        if (!string.IsNullOrWhiteSpace(context.RevenueAccounts.Revenue2Name))
                        {
                            <li>@context.RevenueAccounts.Revenue2Name</li>
                        }
                        if (!string.IsNullOrWhiteSpace(context.RevenueAccounts.Revenue3Name))
                        {
                            <li>@context.RevenueAccounts.Revenue3Name</li>
                        }
                    }
                </ul>
                <h5>DIRECT COSTS</h5>
                <input type="hidden" id="selectedCosts" name="selectedCosts" />
                <ul id="costsList">
                    @if (context.CostsAccounts != null)
                    {
                        if (!string.IsNullOrWhiteSpace(context.CostsAccounts.Costs1Name))
                        {
                            <li>@context.CostsAccounts.Costs1Name</li>
                        }
                        if (!string.IsNullOrWhiteSpace(context.CostsAccounts.Costs2Name))
                        {
                            <li>@context.CostsAccounts.Costs2Name</li>
                        }
                        if (!string.IsNullOrWhiteSpace(context.CostsAccounts.Costs3Name))
                        {
                            <li>@context.CostsAccounts.Costs3Name</li>
                        }
                        if (!string.IsNullOrWhiteSpace(context.CostsAccounts.Costs4Name))
                        {
                            <li>@context.CostsAccounts.Costs4Name</li>
                        }
                        if (!string.IsNullOrWhiteSpace(context.CostsAccounts.Costs5Name))
                        {
                            <li>@context.CostsAccounts.Costs5Name</li>
                        }
                        if (!string.IsNullOrWhiteSpace(context.CostsAccounts.Costs6Name))
                        {
                            <li>@context.CostsAccounts.Costs6Name</li>
                        }
                        if (!string.IsNullOrWhiteSpace(context.CostsAccounts.Costs7Name))
                        {
                            <li>@context.CostsAccounts.Costs7Name</li>
                        }
                        if (!string.IsNullOrWhiteSpace(context.CostsAccounts.Costs8Name))
                        {
                            <li>@context.CostsAccounts.Costs8Name</li>
                        }
                    }
                </ul>
            </div>
        </div>
    </div>
    
    <div class="col-md-12" style="align-items:center">
        <form style="width:100%"><br />
            <div class="form-group row center-elements">
                <button type="submit" class="btn btn-lg red-button"><small>SAVE AND GENERATE WATERFALL</small></button>
            </div>
            <div class="form-group row center-elements">
                <a href="@Url.Action("SelectClient")" class="btn btn-lg gray-button"><small>EXIT</small></a>
            </div>
        </form>
    </div>
</div>
}
